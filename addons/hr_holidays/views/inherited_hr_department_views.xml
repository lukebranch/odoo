<openerp>
<data>
    <record id="hr_holidays_action_request_from_department" model="ir.actions.act_window">
        <field name="name">Leave Request to Approve</field>
        <field name="res_model">hr.holidays</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{
            'default_type': 'remove',
            'search_default_department_id': [active_id],
            'default_department_id': active_id,
            'search_default_approve':1}
        </field>
        <field name="domain">[('type','=','remove')]</field>
        <field name="view_id" ref="view_holiday"/>
        <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
    </record>

    <record id="hr_holidays_action_allocation_from_department" model="ir.actions.act_window">
        <field name="name">Allocation Requests to Approve</field>
        <field name="res_model">hr.holidays</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{
            'default_type': 'add',
            'search_default_department_id': [active_id],
            'default_department_id': active_id,
            'search_default_approve':1}
        </field>
        <field name="domain">[('type','=','add')]</field>
        <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
    </record>

    <!--Hr Department Inherit Kanban view-->
    <record id="hr_department_view_kanban" model="ir.ui.view">
        <field name="name">hr.department.kanban.inherit</field>
        <field name="model">hr.department</field>
        <field name="inherit_id" ref="hr.hr_department_view_kanban"/>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//templates" position="before">
                    <field name="leave_to_approve_count"/>
                    <field name="allocation_to_approve_count"/>
                    <field name="total_employee"/>
                </xpath>
                <xpath expr="//div[@name='to_approve']" position="attributes">
                    <attribute name="class">col-md-6 col-xs-6</attribute>
                </xpath>
                <xpath expr="//div[@name='to_approve']" position="inside">
                    <div>
                        <a name="%(hr_holidays_action_request_from_department)d" type="action">
                            <t t-esc="record.leave_to_approve_count.raw_value or 0"/> Leave Requests
                        </a>
                    </div>
                    <div>
                        <a name="%(hr_holidays_action_allocation_from_department)d" type="action">
                            <t t-esc="record.allocation_to_approve_count.raw_value or 0"/> Allocation Requests
                        </a>
                    </div>
                </xpath>
                <xpath expr="//div[@name='gauge_to_approve']" position="attributes">
                    <attribute name="class">col-md-6 col-xs-6</attribute>
                </xpath>
                <xpath expr="//div[@name='gauge_to_approve']" position="inside">
                    <div class="row">
                        <a name="%(hr_employee_action_from_department)d" type="action">
                            <field name="absence_of_today"
                                options="{
                                'max_field': 'total_employee',
                                'label': 'Absence(s) of Today',
                                'levelcolors': ['#a9d70b', '#f9c802', '#ff0000']}"
                                widget="gauge"
                                style="width:160px; height: 120px; cursor: pointer;">Absence(s) of Today
                            </field>
                        </a>
                    </div>
                </xpath>
            </data>
        </field>
    </record>
</data>
</openerp>
