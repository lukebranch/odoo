<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data noupdate="1">
        <!-- This will set the unit of measure used in projects and tasks.-->
        <record id="base.main_company" model="res.company">
            <field name="project_time_mode_id" ref="product.product_uom_hour"></field>
        </record>

        <!-- Requests Links -->
        <record id="req_link_project" model="res.request.link">
            <field name="name">Project</field>
            <field name="object">project.project</field>
        </record>

        <record id="req_link_task" model="res.request.link">
            <field name="name">Project task</field>
            <field name="object">project.task</field>
        </record>

        <!-- Resource: project.project -->
        <record id="all_projects_account" model="account.analytic.account">
            <field name="name">Projects</field>
            <field name="code">PP001</field>
            <field name="type">view</field>
        </record>
        <function id="parent_project_default_set" model="ir.values" name="set" eval="('default',False,'parent_id', [('project.project', False)], all_projects_account, True, False, False, False, True)"/>
        
        <!-- alias domain: project.config.settings -->
        <function id="default_alias_domain_project" model="ir.values" name="set_default" eval="('project.config.settings', 'generate_project_alias', True)"/>

        <!-- Task Stages -->

        <record id="project_stage_0" model="project.task.type">
            <field name="sequence">1</field>
            <field name="name">To Do</field>
            <field name="legend_blocked">Not validated</field>
            <field name="legend_priority">Use the priority for tasks related to gold customers</field>
            <field name="case_default" eval="True"/>
        </record>
        <record id="project_stage_1" model="project.task.type">
            <field name="sequence">10</field>
            <field name="name">In Progress</field>
            <field name="legend_blocked">Need functional or technical help</field>
            <field name="legend_done">Buzz or set as done</field>
            <field name="case_default" eval="True"/>
        </record>
        <record id="project_stage_2" model="project.task.type">
            <field name="sequence">20</field>
            <field name="name">Done</field>
            <field name="case_default" eval="True"/>
            <field name="fold" eval="True"/>
        </record>
        <record id="project_stage_3" model="project.task.type">
            <field name="sequence">30</field>
            <field name="name">Cancelled</field>
            <field name="case_default" eval="True"/>
            <field name="legend_done">Ready to reopen</field>
            <field name="fold" eval="True"/>
        </record>
    </data>

    <data>
        <!-- Task-related subtypes for messaging / Chatter -->
        <record id="mt_task_new" model="mail.message.subtype">
            <field name="name">Task Opened</field>
            <field name="res_model">project.task</field>
            <field name="default" eval="False"/>
            <field name="hidden" eval="False"/>
            <field name="description">Task opened</field>
        </record>
        <record id="mt_task_blocked" model="mail.message.subtype">
            <field name="name">Task Blocked</field>
            <field name="res_model">project.task</field>
            <field name="default" eval="False"/>
            <field name="description">Task blocked</field>
        </record>
        <record id="mt_task_ready" model="mail.message.subtype">
            <field name="name">Task Ready</field>
            <field name="res_model">project.task</field>
            <field name="default" eval="False"/>
            <field name="description">Task ready for Next Stage</field>
        </record>
        <record id="mt_task_stage" model="mail.message.subtype">
            <field name="name">Stage Changed</field>
            <field name="res_model">project.task</field>
            <field name="default" eval="False"/>
            <field name="description">Stage changed</field>
        </record>
        <!-- Project-related subtypes for messaging / Chatter -->
        <record id="mt_project_task_new" model="mail.message.subtype">
            <field name="name">Task Opened</field>
            <field name="sequence">10</field>
            <field name="res_model">project.project</field>
            <field name="default" eval="False"/>
            <field name="parent_id" eval="ref('mt_task_new')"/>
            <field name="relation_field">project_id</field>
        </record>
        <record id="mt_project_task_blocked" model="mail.message.subtype">
            <field name="name">Task Blocked</field>
            <field name="sequence">11</field>
            <field name="res_model">project.project</field>
            <field name="default" eval="False"/>
            <field name="parent_id" eval="ref('mt_task_blocked')"/>
            <field name="relation_field">project_id</field>
        </record>
        <record id="mt_project_task_ready" model="mail.message.subtype">
            <field name="name">Task Ready</field>
            <field name="sequence">12</field>
            <field name="res_model">project.project</field>
            <field name="parent_id" eval="ref('mt_task_ready')"/>
            <field name="relation_field">project_id</field>
        </record>
        <record id="mt_project_task_stage" model="mail.message.subtype">
            <field name="name">Task Stage Changed</field>
            <field name="sequence">13</field>
            <field name="res_model">project.project</field>
            <field name="default" eval="False"/>
            <field name="parent_id" eval="ref('mt_task_stage')"/>
            <field name="relation_field">project_id</field>
        </record>

        <!-- notify all employees of module installation -->
        <record id="project_module_install_send_email_template" model="mail.template">
            <field name="name">project module install then send email</field>
            <field name="subject">Project Details</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" ><![CDATA[<div style="border: 1px solid rgba(0, 0, 0, .2);width: 600px; margin: 10px auto;">
            <table cellspacing="0" cellpadding="0" style="width:100%;">
                <tbody>
                    <tr>
                        <td style="padding:2px;width:30%;text-align:left;">
                            <img src="web/static/src/img/logo.png"/>
                        </td>
                        <td style="vertical-align: bottom;width:50%;text-align:left">
                            <span style="font-size: 24px;font-weight:bold;vertical-align:top;">PROJECT</span>
                            <span style="vertical-align: bottom;"><img height="40" width="40" src="project/static/description/icon.png" /></span>
                        </td>
                        <td style="vertical-align: top; padding: 8px 10px;text-align: left;font-size: 14px;">
                            <a href="${object.signup_url}" style="float:right ;margin:15px auto;background: #a24689;border-radius: 5px;color: #ffffff;font-size: 10px;padding: 10px 20px 10px 20px;text-decoration: none;">Auto Login</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div style="padding:0px;width:600px;margin:auto;">
                <hr width="100%" style="background-color: black;border:medium none;clear:both;display:block;font-size:0px;min-height:1px;line-height:15px;padding:0;width: 580px;">
            </div>
            <table style="width:100%;text-align:justify;margin:0 auto;border-collapse:collapse;">
                <tbody>
                    <tr>
                        <td style="padding:15px 10px;font-size:20px">
                            <p style="color:#a24689;margin:0" >${object.name}!</p><br>
                            <p dir="ltr" style="font-size:15px;margin-top:0pt;margin-bottom:0pt;">
                                <span>Your Odoo Project application is up and running</span></p><br>
                            <p dir="ltr" style="margin-top:0pt;margin-bottom:8pt;">
                                <span style="font-size:13px;font-weight:bold;">What’s next?</span></p>
                            <ul style="margin-top:0pt;margin-bottom:0pt;font-size:13px;list-style-type:disc;">
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:0pt;">
                                        <span>Try creating a task by sending an email to </span>
                                        <a href="mailto:${object.company_id.email}" >
                                            <span style="font-weight:bold; text-decoration:underline;">${object.company_id.email}</span>
                                        </a>
                                        <span>. (last project created with an alias and only if mail gateway is configured)</span>
                                    </p>
                                </li>
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:8pt;">
                                        <span style="font-weight:bold; text-decoration:underline; ">Invite new users</span>
                                        <span>to collaborate</span></p>
                                </li>
                            </ul> <br>
                            <p dir="ltr" style="font-size:13px;margin-top:0pt;margin-bottom:8pt;">
                                <span style="font-weight:bold;">Discover the </span>
                                <span style="font-weight:bold; text-decoration:underline;">project planner</span>
                                <span> to activate extra features (32% done)</span>
                            </p>
                            <ul style="margin-top:0pt;margin-bottom:0pt;font-size:13px;list-style-type:disc;">
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:0pt;">
                                        <span>Track hours with timesheets,</span>
                                    </p>
                                </li>
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:0pt;">
                                        <span>Plan tasks and resources with forecasts,</span>
                                    </p>
                                </li>
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:0pt;">
                                        <span>Get smart reporting and accurate dashboards,</span>
                                    </p>
                                </li>
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:8pt;">
                                        <span>Bill time on tasks or issues, etc.</span>
                                    </p>
                                </li>
                            </ul>
                            <br>
                            <p dir="ltr" style="font-size:13px;line-height:1.3;margin-top:0pt;margin-bottom:8pt;">
                                <span style="font-weight:bold;">Need Help?</span>
                                <span style="font-style:italic;">You’re not alone</span>
                            </p>
                            <p dir="ltr" style="font-size:13px;margin-top:0pt;margin-bottom:8pt;">
                                <span>We would be delighted to help you along the way. Contact us and we will be happy to help you:</span>
                            </p>
                            <ul style="margin-top:0pt;margin-bottom:0pt;font-size:13px;list-style-type:disc;">
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:0pt;">
                                        <span>By Mail: </span><a href="mailto:support@odoo.com" >
                                        <span style="text-decoration:underline;">help@odoo.com</span></a></p>
                                </li>
                                <li dir="ltr">
                                    <p dir="ltr" style="margin-top:0pt;margin-bottom:8pt;">
                                        <span>Reach us through the </span><span style="text-decoration:underline;">Live Chat in Odoo</span>
                                    </p>
                                </li>
                            </ul>
                            <br>
                            <p dir="ltr" style="font-size:13px;margin-top:0pt;margin-bottom:8pt;"><span>Enjoy your Odoo experience,</span></p>
                            <p dir="ltr" style="font-size:13px;margin-top:0pt;margin-bottom:8pt;"><span>--</span></p>
                            <p dir="ltr" style="font-size:13px;margin-top:0pt;margin-bottom:8pt;"><span>The Odoo Team</span></p>
                            <p dir="ltr" style="font-size:13px;margin-top:0pt;margin-bottom:8pt;"><span>PS: people love Odoo, check </span><span style="text-decoration:underline;">what they say about it</span><span>.</span></p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>]]></field>
        </record>

        <record model="mail.mail" id="project_module_install_send_email">
            <field name="subject">Project Details</field>
            <field name="email_from">help@odoo.com</field>
            <field name="recipient_ids" eval="[(4, ref('base.partner_root'))]"/>
            <field name="auto_delete" eval="True"/>
            <field name="template_id" ref="project_module_install_send_email_template"/>
            <field name="res_id" ref="base.user_root"/> 
        </record>
        <function name="update_module_email_schedule_date" model="mail.mail" >
            <value eval="[ref('project_module_install_send_email')]" />
        </function> 

        <record model="mail.message" id="module_install_notification">
            <field name="model">mail.group</field>
            <field name="res_id" ref="mail.group_all_employees"/>
            <field name="type">notification</field>
            <field name="subtype_id" ref="mail.mt_comment"/>
            <field name="subject">Project Management application installed!</field>
            <field name="body"><![CDATA[<p>Manage multi-level projects and tasks.  You can delegate tasks, track task work, and review your planning.</p>
<p>You can manage todo lists on tasks by installing the <i>Todo Lists</i> application, supporting the Getting Things Done (GTD) methodology.</p>
<p>You can also manage issues/bugs in projects by installing the "Issue Tracker" application.</p>]]></field>
        </record>
    </data>
</openerp>
